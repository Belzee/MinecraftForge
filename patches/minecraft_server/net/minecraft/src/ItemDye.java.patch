--- ../src_base/minecraft_server/net/minecraft/src/ItemDye.java	0000-00-00 00:00:00.000000000 -0000
+++ ../src_work/minecraft_server/net/minecraft/src/ItemDye.java	0000-00-00 00:00:00.000000000 -0000
@@ -3,6 +3,7 @@
 // Decompiler options: packimports(3) braces deadcode fieldsfirst 
 
 package net.minecraft.src;
+import net.minecraft.src.forge.ForgeHooks;
 
 import java.util.Random;
 
@@ -38,13 +39,18 @@
 
     public boolean onItemUse(ItemStack itemstack, EntityPlayer entityplayer, World world, int i, int j, int k, int l)
     {
-        if(!entityplayer.func_35200_c(i, j, k))
+        if(entityplayer!=null && !entityplayer.func_35200_c(i, j, k))
         {
             return false;
         }
         if(itemstack.getItemDamage() == 15)
         {
             int i1 = world.getBlockId(i, j, k);
+	    if(ForgeHooks.onUseBonemeal(world,i1,i,j,k)) {
+		    if(!world.singleplayerWorld)
+			    itemstack.stackSize--;
+		    return true;
+	    }
             if(i1 == Block.sapling.blockID)
             {
                 if(!world.singleplayerWorld)
@@ -111,13 +117,7 @@
                             world.setBlockAndMetadataWithNotify(k1, l1, i2, Block.tallGrass.blockID, 1);
                             continue;
                         }
-                        if(itemRand.nextInt(3) != 0)
-                        {
-                            world.setBlockWithNotify(k1, l1, i2, Block.plantYellow.blockID);
-                        } else
-                        {
-                            world.setBlockWithNotify(k1, l1, i2, Block.plantRed.blockID);
-                        }
+			ForgeHooks.plantGrassPlant(world,k1,l1,i2);
                     }
 
                 }
